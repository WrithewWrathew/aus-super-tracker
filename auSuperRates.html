<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AusSuper International Shares (6 Proxies)</title>
<style>
  body { 
    font-family: Arial, sans-serif; 
    padding: 40px; 
    max-width: 600px; 
    margin: auto; 
    background: #f5f5f5; 
    text-align: center; 
  }
  #output { 
    font-size: 3.5em; 
    margin: 30px 0; 
    padding: 40px; 
    background: white; 
    border-radius: 20px; 
    box-shadow: 0 6px 30px rgba(0,0,0,0.15); 
    font-weight: bold;
  }
  button { 
    padding: 15px 35px; 
    font-size: 1.3em; 
    background: #0078d4; 
    color: white; 
    border: none; 
    border-radius: 10px; 
    cursor: pointer; 
    margin: 10px; 
  }
  button:hover { background: #106ebe; }
  .status { 
    font-size: 1.2em; 
    color: #666; 
    margin: 15px 0; 
  }
  #debug { 
    font-size: 0.9em; 
    color: #888; 
    background: #f0f0f0; 
    padding: 15px; 
    border-radius: 8px; 
    margin: 10px 0;
    max-height: 120px;
    overflow-y: auto;
    font-family: monospace;
  }
</style>
</head>
<body>

<h1>ü§ë AusSuper International Shares</h1>
<div class="status" id="status">Trying 6 proxies...</div>
<div id="output">‚è≥</div>
<div id="debug"></div>
<button id="refreshBtn">üîÑ Try Again</button>

<script>
const TARGET_URL = 'https://www.australiansuper.com/why-choose-us/our-performance?superType=Super&display=table';

const PROXIES = [
  'https://api.allorigins.win/raw?url=',
  'https://corsproxy.io/?',
  'https://thingproxy.freeboard.io/fetch/',
  'https://api.codetabs.com/v1/proxy?quest=',
  'https://corsproxy.org/?',
  'https://proxy.cors.sh/'
];

async function scrapeData() {
  const status = document.getElementById('status');
  const output = document.getElementById('output');
  const debug = document.getElementById('debug');
  
  status.textContent = '‚è≥ Trying proxies...';
  output.textContent = '‚è≥';
  debug.innerHTML = '';
  
  for (let i = 0; i < PROXIES.length; i++) {
    const proxy = PROXIES[i];
    debug.innerHTML += `<strong>Proxy ${i+1}: ${proxy.substring(0, 30)}...</strong><br>`;
    
    try {
      const response = await fetch(proxy + encodeURIComponent(TARGET_URL));
      const html = await response.text();
      debug.innerHTML += `‚úÖ SUCCESS!<br>`;
      
      // SEARCH for International Shares marker
      const marker = 'diy-mixed-investment-choice">International Shares</a></th>';
      const markerIndex = html.indexOf(marker);
      
      if (markerIndex === -1) {
        debug.innerHTML += `‚ùå Marker not found<br>`;
        continue;
      }
      
      // Extract row
      const trStart = html.lastIndexOf('<tr', markerIndex);
      const trEnd = html.indexOf('</tr>', markerIndex);
      const rowHtml = html.substring(trStart, trEnd + 5);
      
      // Extract percentages
      const percents = rowHtml.match(/-?\d+\.?\d*%+/g) || [];
      debug.innerHTML += `Found ${percents.length} percents: ${percents.join(', ')}<br>`;
      
      // LAST non-zero
      let lastNonZero = null;
      for (let j = percents.length - 1; j >= 0; j--) {
        const val = parseFloat(percents[j].replace('%', ''));
        if (!isNaN(val) && Math.abs(val) > 0.0001) {
          lastNonZero = val;
          break;
        }
      }
      
      if (lastNonZero === null) {
        output.textContent = 'Currently no change.';
        output.style.color = '#666';
      } else {
        output.textContent = lastNonZero.toFixed(4) + '%';
        output.style.color = lastNonZero >= 0 ? '#00aa44' : '#cc0000';
      }
      
      status.textContent = `‚úÖ Proxy ${i+1} worked!`;
      return;
      
    } catch (error) {
      debug.innerHTML += `‚ùå ${error.message}<br><br>`;
    }
  }
  
  status.textContent = '‚ùå All 6 proxies failed';
  output.textContent = 'Failed';
  output.style.color = '#cc0000';
}

// Auto-run + button
scrapeData();
document.getElementById('refreshBtn').addEventListener('click', scrapeData);
</script>

</body>
</html>
